{% comment %} Based on https://github.com/ilastik/ilastik.github.io/blob/master/_includes/toc.
    I need this, because I want to generate the TOC of the current page out of _layouts/default.md, but layouts can't generate toc.
{% endcomment %}
{% capture basemd %}
{% raw %}
<div markdown="1">

* TOC
{:toc}

</div>
{% endraw %}
{{page.content}}
{% endcapture %}

{% assign toc = basemd | markdownify | split:'</div>' | first | append:'</div>' %}